-- ----------------------------------------------------------------
-- PRELIMINARY STEP: Enable RLS on all tables
-- ----------------------------------------------------------------
-- alter table "places" enable row level security;
-- alter table "items" enable row level security;
-- alter table "actions" enable row level security;
-- alter table "categories" enable row level security;

-- ----------------------------------------------------------------
-- "places" table
-- ----------------------------------------------------------------
-- Users can CRUD their own places
create policy "Allow full access for user's own places"
on "places" for all
using (auth.uid() = user_id)
with check (auth.uid() = user_id);

-- ----------------------------------------------------------------
-- "items" table
-- ----------------------------------------------------------------
-- Users can CRUD their own items
create policy "Allow full access for user's own items"
on "items" for all
using (auth.uid() = user_id)
with check (auth.uid() = user_id);

-- ----------------------------------------------------------------
-- "categories" table (NEW)
-- ----------------------------------------------------------------
-- Users can CRUD their own categories
create policy "Allow full access for user's own categories"
on "categories" for all
using (auth.uid() = user_id)
with check (auth.uid() = user_id);

-- ----------------------------------------------------------------
-- "actions" table
-- ----------------------------------------------------------------
-- Users can insert their own actions
create policy "Allow user to insert their own actions"
on "actions" for insert
with check (auth.uid() = user_id);

-- Users can read their own actions (for export)
create policy "Allow user to read their own actions"
on "actions" for select
using (auth.uid() = user_id);